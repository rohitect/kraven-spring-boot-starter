<div 
  class="context-menu" 
  *ngIf="visible" 
  [style.left.px]="x" 
  [style.top.px]="y"
>
  <div class="context-menu-items">
    <div 
      *ngFor="let item of items"
      class="context-menu-item"
      [class.disabled]="item.disabled"
      [class.divider]="item.divider"
      (click)="!item.disabled && onMenuItemClick(item.action)"
    >
      <div *ngIf="!item.divider" class="item-content">
        <span *ngIf="item.icon" class="item-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <ng-container [ngSwitch]="item.icon">
              <!-- Close icon -->
              <ng-container *ngSwitchCase="'close'">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </ng-container>
              <!-- Close all icon -->
              <ng-container *ngSwitchCase="'close-all'">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="9" x2="15" y2="15"></line>
                <line x1="15" y1="9" x2="9" y2="15"></line>
              </ng-container>
              <!-- Close others icon -->
              <ng-container *ngSwitchCase="'close-others'">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="9" x2="15" y2="15"></line>
                <line x1="15" y1="9" x2="9" y2="15"></line>
              </ng-container>
              <!-- Favorite icon -->
              <ng-container *ngSwitchCase="'favorite'">
                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
              </ng-container>
              <!-- Unfavorite icon -->
              <ng-container *ngSwitchCase="'unfavorite'">
                <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path>
              </ng-container>
              <!-- Refresh icon -->
              <ng-container *ngSwitchCase="'refresh'">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                <path d="M3 3v5h5"></path>
              </ng-container>
              <!-- Copy icon -->
              <ng-container *ngSwitchCase="'copy'">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </ng-container>
            </ng-container>
          </svg>
        </span>
        <span class="item-label">{{ item.label }}</span>
      </div>
    </div>
  </div>
</div>
